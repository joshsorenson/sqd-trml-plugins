<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRMNL Linear Plugin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', 'Courier', monospace;
            line-height: 1.6;
            color: #fff;
            background: #000;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 1.5em;
            margin: 20px 0 10px 0;
            color: #fff;
        }
        
        h2 {
            font-size: 1.2em;
            margin: 30px 0 10px 0;
            color: #ccc;
        }
        
        p, li {
            margin: 10px 0;
        }
        
        a {
            color: #fff;
            text-decoration: underline;
        }
        
        a:hover {
            color: #ccc;
        }
        
        .comment {
            color: #666;
        }
        
        .key {
            color: #ddd;
        }
        
        .string {
            color: #aaa;
        }
        
        code {
            color: #fff;
        }
        
        pre {
            background: #111;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
            border: 1px solid #333;
            position: relative;
        }
        
        ul, ol {
            margin-left: 20px;
        }
        
        hr {
            border: none;
            border-top: 1px solid #333;
            margin: 30px 0;
        }
        
        .header-logos {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .header-logos svg {
            height: 40px;
            width: auto;
        }
        
        .logo-separator {
            color: #666;
            font-size: 2em;
        }
        
        .copy-container {
            position: relative;
        }
        
        .copy-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #333;
            color: #fff;
            border: 1px solid #666;
            padding: 5px 10px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .copy-btn:hover {
            background: #444;
        }
        
        .copy-btn.copied {
            background: #0f0;
            color: #000;
        }
        
        .liquid-code {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>

<div class="header-logos">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="200" height="200" viewBox="0 0 100 100">
    <path fill="#fff" d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z"/>
  </svg>
  <span class="logo-separator">×</span>
  <svg viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill="#fff" d="M63.6 31.8c-.7 0-1.4-.3-1.8-.7l-2.5-2.5c-.5-.5-.7-1.1-.7-1.8s.3-1.4.7-1.8l2.5-2.5c.5-.5 1.1-.7 1.8-.7.7 0 1.4.3 1.8.7l2.5 2.5c.5.5.7 1.1.7 1.8s-.3 1.4-.7 1.8l-2.5 2.5c-.5.5-1.1.7-1.8.7M46.8 33.8c.7 0 1.4-.3 1.8-.7L71.2 10c.5-.5.7-1.1.7-1.8s-.3-1.4-.7-1.8c-.5-.5-1.1-.7-1.8-.7H60.3c-.7 0-1.4.3-1.8.7L37.2 29.5c-1.1 1-1.1 2.7 0 3.8.2.2.7.5 1.3.5zM8.1 84.3l25.2-26.6-3.6-3.6L3.1 79.3c-.5.5-.7 1.1-.7 1.8s.3 1.4.7 1.8l2.5 2.5c.4.3 1.1.6 1.7.6s1.3-.2 1.8-.7M12.4 53.9c-.7 0-1.4-.3-1.8-.7L8.1 50.7c-.5-.5-.7-1.1-.7-1.8s.3-1.4.7-1.8l23.1-23.1c.5-.5 1.1-.7 1.8-.7s1.4.3 1.8.7l2.5 2.5c1 1 1 2.6 0 3.6L14.2 53.2c-.4.5-1 .7-1.8.7M88.2 31.1c.7 0 1.4-.3 1.8-.7l2.5-2.5c.5-.5.7-1.1.7-1.8s-.3-1.4-.7-1.8l-2.5-2.5c-.5-.5-1.1-.7-1.8-.7s-1.4.3-1.8.7L63.3 45.1c-.5.5-.7 1.1-.7 1.8s.3 1.4.7 1.8l2.5 2.5c.5.5 1.1.7 1.8.7s1.4-.3 1.8-.7L86.4 34c.5-.5 1.1-.7 1.8-.7"/>
    <path fill="#fff" d="M88.2 62.4c.7 0 1.4-.3 1.8-.7l2.5-2.5c.5-.5.7-1.1.7-1.8s-.3-1.4-.7-1.8L70.9 33.9c-.5-.5-1.1-.7-1.8-.7s-1.4.3-1.8.7l-2.5 2.5c-.5.5-.7 1.1-.7 1.8s.3 1.4.7 1.8L86.4 61.7c.5.5 1.1.7 1.8.7"/>
  </svg>
</div>

<pre>
<span class="comment">/**
 * TRMNL Linear Plugin
 * Display your Linear issues on TRMNL - issues from current cycle and earlier
 * https://github.com/joshsorenson/trml-plugins
 */</span>

<span class="key">const</span> plugin = {
  <span class="key">name</span>: <span class="string">"Linear Issues - Current Cycle"</span>,
  <span class="key">endpoint</span>: <span class="string">"https://trml-plugins.vercel.app/api/linear-issues"</span>,
  <span class="key">repo</span>: <span class="string">"https://github.com/joshsorenson/trml-plugins"</span>
};
</pre>

<h1>// Quick Start</h1>
<ol>
  <li>Get your Linear API key: <a href="https://linear.app/settings/api" target="_blank">linear.app/settings/api</a></li>
  <li>Create plugin: <a href="https://usetrmnl.com/plugins" target="_blank">usetrmnl.com/plugins</a></li>
  <li>Configure using settings below (click copy buttons)</li>
  <li>Copy and paste the markup template</li>
  <li>Activate!</li>
</ol>

<hr>

<h1>// TRMNL Configuration</h1>

<h2>Strategy:</h2>
<div class="copy-container">
  <button class="copy-btn" onclick="copyToClipboard('Polling', this)">copy</button>
  <pre>Polling</pre>
</div>

<h2>Polling URL(s):</h2>
<div class="copy-container">
  <button class="copy-btn" onclick="copyToClipboard('https://trml-plugins.vercel.app/api/linear-issues', this)">copy</button>
  <pre>https://trml-plugins.vercel.app/api/linear-issues</pre>
</div>

<h2>Polling Verb:</h2>
<div class="copy-container">
  <button class="copy-btn" onclick="copyToClipboard('GET', this)">copy</button>
  <pre>GET</pre>
</div>

<h2>Polling Headers:</h2>
<p class="comment">Replace YOUR_LINEAR_API_KEY_HERE with your actual Linear API key</p>
<div class="copy-container">
  <button class="copy-btn" onclick="copyToClipboard('X-Linear-API-Key=YOUR_LINEAR_API_KEY_HERE', this)">copy</button>
  <pre>X-Linear-API-Key=YOUR_LINEAR_API_KEY_HERE</pre>
</div>

<h2>Polling Body:</h2>
<pre>(leave empty)</pre>

<h2>Form Fields:</h2>
<pre>(leave empty)</pre>

<h2>Remove bleed margin?</h2>
<div class="copy-container">
  <button class="copy-btn" onclick="copyToClipboard('No', this)">copy</button>
  <pre>No</pre>
</div>

<h2>Enable Dark Mode?</h2>
<div class="copy-container">
  <button class="copy-btn" onclick="copyToClipboard('No', this)">copy</button>
  <pre>No  <span class="comment">// optional - your preference</span></pre>
</div>

<hr>

<h1>// Markup Template (linear.liquid)</h1>
<p>Copy this entire template and paste into TRMNL's markup editor:</p>
<div class="copy-container">
  <button class="copy-btn" onclick="copyLiquidTemplate(this)">copy all</button>
  <pre class="liquid-code" id="liquid-template">{% comment %}
TRMNL Plugin: Linear Issues - Current Cycle & Overdue
Displays Linear issues assigned to you that are due in the current cycle or earlier
{% endcomment %}

&lt;style&gt;
  #linear-issues {
    font-size: 95%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
  }
  
  #linear-issues thead th {
    padding: 8px 4px;
    border-bottom: 2px solid #000;
  }
  
  #linear-issues tbody td {
    padding: 10px 4px;
    vertical-align: middle;
  }
  
  #linear-issues tbody tr {
    border-bottom: 1px solid #ddd;
  }
  
  #linear-issues tbody tr:last-child {
    border-bottom: none;
  }
  
  .priority-badge {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 6px;
    vertical-align: middle;
  }
  
  .priority-1 { 
    background: #000;
    box-shadow: 0 0 0 2px rgba(0,0,0,0.2);
  }
  .priority-2 { 
    background: #666;
    box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
  }
  .priority-3 { background: #999; }
  .priority-4 { background: #ccc; }
  
  .issue-id {
    font-family: 'Courier New', monospace;
    font-weight: 600;
    white-space: nowrap;
  }
  
  .issue-title {
    font-weight: 500;
    line-height: 1.3;
  }
  
  .cycle-badge {
    font-family: 'Courier New', monospace;
    font-size: 90%;
    font-weight: 600;
  }
  
  .image.linear-icon {
    width: 1.5em;
    height: 1.5em;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' width='200' height='200' viewBox='0 0 100 100'%3E%3Cpath fill='%23000' d='M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
  }
&lt;/style&gt;

&lt;div class="layout layout--top"&gt;
  &lt;table class="table" id="linear-issues"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;&lt;span class="title title--small"&gt;ID&lt;/span&gt;&lt;/th&gt;
        &lt;th&gt;&lt;span class="title title--small"&gt;Title&lt;/span&gt;&lt;/th&gt;
        &lt;th&gt;&lt;span class="title title--small"&gt;Status&lt;/span&gt;&lt;/th&gt;
        &lt;th&gt;&lt;span class="title title--small"&gt;Cycle&lt;/span&gt;&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      {% for issue in issues %}
      &lt;tr&gt;
        &lt;td&gt;
          &lt;span class="issue-id"&gt;
            {% if issue.priority &gt; 0 and issue.priority &lt; 3 %}
              &lt;span class="priority-badge priority-{{ issue.priority }}"&gt;&lt;/span&gt;
            {% endif %}
            {{ issue.identifier }}
          &lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="issue-title"&gt;{{ issue.title | truncate: 55 }}&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="label label--small"&gt;{{ issue.status }}&lt;/span&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;span class="cycle-badge"&gt;
            {% if issue.cycleNumber %}
              #{{ issue.cycleNumber }}
              {% if issue.cycleStatus == 'current' %}
                &lt;small&gt;●&lt;/small&gt;
              {% elsif issue.cycleStatus == 'past' %}
                &lt;small&gt;◄&lt;/small&gt;
              {% elsif issue.cycleStatus == 'future' %}
                &lt;small&gt;►&lt;/small&gt;
              {% endif %}
            {% else %}
              -
            {% endif %}
          &lt;/span&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
      {% endfor %}
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/div&gt;

&lt;div class="title_bar"&gt;
  &lt;span class="image linear-icon image-stroke"&gt;&lt;/span&gt;
  &lt;span class="title"&gt;{{ trmnl.plugin_settings.instance_name }}&lt;/span&gt;
  &lt;span class="instance"&gt;{{ issues | size }} Issues{% if current_cycle %} • Cycle #{{ current_cycle }}{% endif %}&lt;/span&gt;
&lt;/div&gt;

&lt;script&gt;
  var issues_table = document.querySelector("#linear-issues");
  if (issues_table.clientHeight &gt;= issues_table.parentNode.clientHeight) {
    issues_table.classList.add("table--condensed");
  }
&lt;/script&gt;</pre>
</div>

<hr>

<h1>// Test Your Setup</h1>
<div class="copy-container">
  <button class="copy-btn" onclick="copyToClipboard('curl -H &quot;X-Linear-API-Key: YOUR_LINEAR_API_KEY&quot; https://trml-plugins.vercel.app/api/linear-issues', this)">copy</button>
  <pre>curl -H "X-Linear-API-Key: YOUR_LINEAR_API_KEY" \
  https://trml-plugins.vercel.app/api/linear-issues</pre>
</div>

<hr>

<h1>// Features</h1>
<ul>
  <li>Shows issues from current cycle and earlier</li>
  <li>Priority badges for urgent/high priority items</li>
  <li>Cycle status indicators (●current ◄past ►future)</li>
  <li>Sorted by cycle then priority</li>
  <li>Clean sans-serif typography</li>
  <li>E-ink optimized display</li>
</ul>

<hr>

<p class="comment">// Built for <a href="https://usetrmnl.com" target="_blank">TRMNL</a> • Using <a href="https://linear.app" target="_blank">Linear</a> API • MIT License</p>

<script>
function copyToClipboard(text, button) {
  navigator.clipboard.writeText(text).then(() => {
    button.textContent = 'copied!';
    button.classList.add('copied');
    setTimeout(() => {
      button.textContent = 'copy';
      button.classList.remove('copied');
    }, 2000);
  });
}

function copyLiquidTemplate(button) {
  const template = document.getElementById('liquid-template').textContent;
  // Decode HTML entities
  const decoded = template
    .replace(/&lt;/g, '<')
    .replace(/&gt;/g, '>')
    .replace(/&quot;/g, '"')
    .replace(/&amp;/g, '&');
  
  navigator.clipboard.writeText(decoded).then(() => {
    button.textContent = 'copied!';
    button.classList.add('copied');
    setTimeout(() => {
      button.textContent = 'copy all';
      button.classList.remove('copied');
    }, 2000);
  });
}
</script>

</body>
</html>
