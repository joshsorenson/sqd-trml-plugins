{% comment %}
TRMNL Plugin: Submission Counts
Displays submission counts from Supabase for prf_general_submissions and prf_project_submissions
Shows counts for Today, This Week, and This Month
Supabase URL: {{ trmnl.plugin_settings.custom_fields_values.supabase_url }}
Supabase Key: {{ trmnl.plugin_settings.custom_fields_values.supabase_key }}
{% endcomment %}

<style>
  .submissions-container {
    display: flex;
    flex-direction: column;
    gap: 1.5em;
    height: 100%;
  }
  
  .submission-section {
    display: flex;
    flex-direction: column;
    gap: 0.75em;
  }
  
  .section-title {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--text-primary, #000);
    margin-bottom: 0.25em;
  }
  
  .counts-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75em;
  }
  
  .count-card {
    display: flex;
    flex-direction: column;
    padding: 0.75em;
    background: var(--bg-secondary, #f5f5f5);
    border-radius: 0.5em;
    border: 1px solid var(--border-color, #e0e0e0);
  }
  
  .count-label {
    font-size: 0.85em;
    color: var(--text-secondary, #666);
    margin-bottom: 0.25em;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .count-value {
    font-size: 1.75em;
    font-weight: 700;
    color: var(--text-primary, #000);
    line-height: 1.2;
  }
  
  /* Compact view adjustments */
  .view--quadrant .counts-grid {
    grid-template-columns: 1fr;
    gap: 0.5em;
  }
  
  .view--quadrant .count-card {
    padding: 0.5em;
  }
  
  .view--quadrant .count-value {
    font-size: 1.5em;
  }
  
  .view--half_vertical .counts-grid,
  .view--half_horizontal .counts-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5em;
  }
  
  .view--half_vertical .count-card,
  .view--half_horizontal .count-card {
    padding: 0.6em;
  }
  
  .view--half_vertical .count-value,
  .view--half_horizontal .count-value {
    font-size: 1.5em;
  }
  
  .title_bar {
    display: flex;
    align-items: center;
    gap: 0.5em;
  }
  
  .title_bar .title {
    font-size: 1.15em;
  }
  
  .title_bar .instance {
    font-size: 1em;
    color: var(--text-secondary, #666);
  }
</style>

<div class="submissions-container">
  {% comment %} General Submissions Section {% endcomment %}
  <div class="submission-section">
    <div class="section-title">General Submissions</div>
    <div class="counts-grid">
      <div class="count-card">
        <div class="count-label">Today</div>
        <div class="count-value">{{ counts.general_submissions.today }}</div>
      </div>
      <div class="count-card">
        <div class="count-label">This Week</div>
        <div class="count-value">{{ counts.general_submissions.this_week }}</div>
      </div>
      <div class="count-card">
        <div class="count-label">This Month</div>
        <div class="count-value">{{ counts.general_submissions.this_month }}</div>
      </div>
    </div>
  </div>
  
  {% comment %} Project Submissions Section {% endcomment %}
  <div class="submission-section">
    <div class="section-title">Project Submissions</div>
    <div class="counts-grid">
      <div class="count-card">
        <div class="count-label">Today</div>
        <div class="count-value">{{ counts.project_submissions.today }}</div>
      </div>
      <div class="count-card">
        <div class="count-label">This Week</div>
        <div class="count-value">{{ counts.project_submissions.this_week }}</div>
      </div>
      <div class="count-card">
        <div class="count-label">This Month</div>
        <div class="count-value">{{ counts.project_submissions.this_month }}</div>
      </div>
    </div>
  </div>
</div>

<div class="title_bar">
  <span class="title">{{ trmnl.plugin_settings.instance_name }}</span>
  <span class="instance">Updated {{ counts.updated_at | date: "%H:%M" }}</span>
</div>

